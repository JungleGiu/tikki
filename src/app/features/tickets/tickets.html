<div class="card">
  <header>
    <h3>Tickets</h3>
    <div class="actions">
      <app-searcher
        (onSearch)="onSearch($event)"
        [searchFields]="['title', 'department_id', 'deadline', 'status', 'priority']"
        [allData]="allTickets"
      ></app-searcher>
      <button (click)="openCreateDialog()">+ New Ticket</button>
    </div>
  </header>
  <app-team-table
    (selectTicket)="onSelectEditTicket($event)"
    (deleteTicket)="onDeleteTicket($event)"
    [ticketsElements]="displayTickets"
  ></app-team-table>
  <app-pagination-tool
    [elements]="allTickets"
    (currentResults)="displayTickets.set($event)"
  ></app-pagination-tool>
</div>

@if (deleteConfirmation()){
<app-confirm-delete-dialog
  [item]="'ticket'"
  [id]="ticketSelected()?.id ?? ''"
  (confirm)="onDeleteConfirm($event)"
  (cancel)="deleteConfirmation.set(false)"
></app-confirm-delete-dialog>
} @if(ticketSelected() && ticketdetailsMode() === 'view' && isTicketDetailsVisible()){
<app-ticket-details
  [ticket]="ticketSelected()!"
  [isVisible]="isTicketDetailsVisible"
  (recharge)="rechargeTickets()"
></app-ticket-details>
}
@if (isTicketDetailsVisible() && !ticketSelected()){
<app-ticket-details
  [mode]="ticketdetailsMode"
  [isVisible]="isTicketDetailsVisible"
  (recharge)="rechargeTickets()"
></app-ticket-details>
}
